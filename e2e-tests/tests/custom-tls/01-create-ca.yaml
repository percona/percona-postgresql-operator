apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: custom-cert-tls-issue-pg-ca-issuer
spec:
  selfSigned: {}
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: custom-cert-tls-issue-ca-cert
spec:
  isCA: true
  commonName: postgres-operator-ca
  secretName: custom-cert-tls-issue-ca-cert
  privateKey:
    algorithm: ECDSA
    size: 384
  issuerRef:
    name: custom-cert-tls-issue-pg-ca-issuer
    kind: Issuer
  duration: 26280h0m0s
  renewBefore: 730h0m0s
  usages:
    - "cert sign"
    - "crl sign"
#const rootCommonName = "postgres-operator-ca"
#	const rootExpiration = time.Hour * 24 * 365 * 10
#	const rootStartValid = time.Hour * -1
#
#	now := currentTime()
#	template := &x509.Certificate{
#		BasicConstraintsValid: true,
#		IsCA:                  true,
#		KeyUsage:              x509.KeyUsageCertSign | x509.KeyUsageCRLSign,
#		MaxPathLenZero:        true, // there are no intermediate certificates
#		NotBefore:             now.Add(rootStartValid),
#		NotAfter:              now.Add(rootExpiration),
#		SerialNumber:          serialNumber,
#		SignatureAlgorithm:    certificateSignatureAlgorithm,
#		Subject: pkix.Name{
#			CommonName: rootCommonName,
#		},
#	}

