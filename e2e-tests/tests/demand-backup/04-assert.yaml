apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 560
---
kind: Job
apiVersion: batch/v1
metadata:
  annotations:
    postgres-operator.crunchydata.com/pgbackrest-backup: demand-backup-full
  labels:
    postgres-operator.crunchydata.com/cluster: demand-backup
    postgres-operator.crunchydata.com/pgbackrest: ""
    postgres-operator.crunchydata.com/pgbackrest-backup: manual
    postgres-operator.crunchydata.com/pgbackrest-repo: repo1
  ownerReferences:
    - apiVersion: postgres-operator.crunchydata.com/v1beta1
      kind: PostgresCluster
      name: demand-backup
      controller: true
      blockOwnerDeletion: true
status:
  succeeded: 1
---
apiVersion: pgv2.percona.com/v2
kind: PerconaPGBackup
metadata:
  name: demand-backup-full
spec:
  pgCluster: demand-backup
  repoName: repo1
  options:
    - --type=full
status:
  state: Succeeded
