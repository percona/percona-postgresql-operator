apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 600
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  annotations:
    pgv2.percona.com/snapshot-restore: restore1
  labels:
    postgres-operator.crunchydata.com/cluster: backup-snapshot
    postgres-operator.crunchydata.com/role: pgdata
spec:
  dataSource:
    apiGroup: snapshot.storage.k8s.io
    kind: VolumeSnapshot
    name: backup1
---
apiVersion: pgv2.percona.com/v2
kind: PerconaPGRestore
metadata:
  name: restore1
status:
  state: Succeeded
---
apiVersion: pgv2.percona.com/v2
kind: PerconaPGCluster
metadata:
  name: backup-snapshot
status:
  pgbouncer:
    ready: 3
    size: 3
  postgres:
    instances:
    - name: instance1
      ready: 3
      size: 3
    ready: 3
    size: 3
  state: ready