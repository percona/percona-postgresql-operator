---
apiVersion: v1
kind: Secret
metadata:
  name: openldap-tls-admin
type: Opaque
stringData:
  adminpassword: adminpassword
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: ldap-issuer
spec:
  selfSigned: {}
---
# A self-signed CA certificate.  cert-manager stores it in the Secret
# "ldap-ca" with keys tls.crt (server cert), tls.key (server key), and
# ca.crt (CA cert).  commonName must match the Kubernetes Service name so
# that PostgreSQL can verify the LDAP server's certificate hostname.
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: ldap-ca
spec:
  isCA: true
  commonName: openldap-tls
  secretName: ldap-ca
  issuerRef:
    name: ldap-issuer
    kind: Issuer
    group: cert-manager.io
